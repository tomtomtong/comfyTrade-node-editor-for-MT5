<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ComfyTrade - Open source MT5 node-based trading strategy builder. Visual drag-and-drop interface for creating trading strategies without coding.">
  <meta name="keywords" content="MT5, MetaTrader 5, trading, strategy builder, node editor, forex, open source">
  <meta property="og:title" content="ComfyTrade - MT5 Node Editor Demo">
  <meta property="og:description" content="Try the web demo of ComfyTrade, an open source visual trading strategy builder for MetaTrader 5">
  <meta property="og:type" content="website">
  <title>ComfyTrade - MT5 Node Editor Demo</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@3.4.4/build/global/luxon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.umd.min.js"></script>
</head>
<body>
  <div class="app-container">
    <!-- Large Promotional Header -->
    <div class="promo-header">
      <div class="promo-main">
        <h1 class="promo-title">ComfyTrade - Open Source MT5 Node Editor</h1>
        <p class="promo-subtitle">Visual Trading Strategy Builder ‚Ä¢ No Coding Required ‚Ä¢ Free & Open Source</p>
        
        <!-- YouTube Video Demo -->
        <div class="video-demo-section">
          <h3 class="video-demo-title">üé• Watch ComfyTrade in Action</h3>
          <div class="video-container">
            <iframe 
              src="https://www.youtube.com/embed/M4PLVVUaQo8" 
              title="ComfyTrade Demo - MT5 Node Editor for Trading Strategies"
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
              allowfullscreen>
            </iframe>
          </div>
          <p class="video-demo-caption">See how to build visual trading strategies with the node editor</p>
        </div>
        
        <div class="promo-cta-large">
          <a href="https://github.com/tomtomtong/comfyTrade-node-editor-for-MT5" target="_blank" class="cta-btn cta-btn-github">
            <span class="cta-icon">‚≠ê</span>
            <span class="cta-text">
              <strong>View Full Project on GitHub</strong>
              <small>Download desktop version with real MT5 integration</small>
            </span>
          </a>
          <a href="mailto:tomtomtongtong@gmail.com" class="cta-btn cta-btn-contact">
            <span class="cta-icon">üìß</span>
            <span class="cta-text">
              <strong>Get Support</strong>
              <small>tomtomtongtong@gmail.com</small>
            </span>
          </a>
        </div>
      </div>
    </div>
    
    <!-- Demo Warning Banner -->
    <div class="demo-warning">
      <div class="demo-warning-content">
        <span class="demo-warning-icon">‚ö†Ô∏è</span>
        <div class="demo-warning-text">
          <strong>LIMITED WEB DEMO</strong> - This is a simplified demo with simulated data only. 
          <a href="https://github.com/tomtomtong/comfyTrade-node-editor-for-MT5/releases" target="_blank" class="demo-download-link">
            Download the full desktop version
          </a> for real MT5 trading, backtesting, alerts, and advanced features.
        </div>
      </div>
    </div>

    <!-- Top Toolbar -->
    <div class="toolbar">
      <div class="toolbar-left">
        <h1>ComfyTrade <span class="version-badge">WEB DEMO</span></h1>
        <button id="connectBtn" class="btn btn-primary">Connect Demo</button>
        <button id="showLogBtn" class="btn btn-secondary">Show Log</button>
        <button id="toggleBottomPanelBtn" class="btn btn-secondary">üìä Positions</button>
      </div>
      <div class="toolbar-right">
        <a href="https://github.com/tomtomtong/comfyTrade-node-editor-for-MT5" target="_blank" class="btn btn-github-toolbar">
          ‚≠ê GitHub Project
        </a>
        <button id="aboutBtn" class="btn btn-info">‚ÑπÔ∏è Full Version Info</button>
        <button id="tradeBtn" class="btn btn-success">New Trade</button>
        <button id="settingsBtn" class="btn btn-secondary">‚öô Settings</button>
        <button id="helpBtn" class="btn btn-secondary">‚ùì Help</button>
        <button id="runStrategyBtn" class="btn btn-success">‚ñ∂ Run Strategy</button>
        <button id="stopStrategyBtn" class="btn btn-danger" style="display: none;">‚èπ Stop</button>
        <button id="saveGraphBtn" class="btn btn-secondary">Save</button>
        <button id="loadGraphBtn" class="btn btn-secondary">Load</button>
        <button id="clearGraphBtn" class="btn btn-danger">Clear</button>
      </div>
    </div>

    <!-- Main Layout -->
    <div class="main-layout">
      <div class="top-section">
        <!-- Left Sidebar - Node Palette -->
        <div class="sidebar left-sidebar">
          <h3>Node Library</h3>
          
          <div class="node-category">
            <h4>Triggers</h4>
            <button class="node-btn trigger-btn" data-type="trigger">‚ö° Trigger</button>
          </div>

          <div class="node-category">
            <h4>Data</h4>
            <button class="node-btn signal-btn" data-type="string-input">üìù String Input</button>
            <button class="node-btn signal-btn" data-type="string-output">üìÑ String Output</button>
            <button class="node-btn signal-btn" data-type="mt5-data">üìä MT5 Data</button>
          </div>

          <div class="node-category">
            <h4>Indicators</h4>
            <button class="node-btn" data-type="indicator-ma">Moving Average</button>
            <button class="node-btn" data-type="indicator-rsi">RSI</button>
          </div>

          <div class="node-category">
            <h4>Logic</h4>
            <button class="node-btn" data-type="conditional-check">Conditional Check</button>
            <button class="node-btn" data-type="logic-and">AND Gate</button>
            <button class="node-btn" data-type="logic-or">OR Gate</button>
          </div>

          <div class="node-category">
            <h4>Trading</h4>
            <button class="node-btn" data-type="trade-signal">Open Position</button>
            <button class="node-btn" data-type="close-position">Close Position</button>
            <button class="node-btn" data-type="modify-position">Modify Position</button>
          </div>

          <div class="node-category">
            <h4>Control</h4>
            <button class="node-btn control-btn" data-type="end-strategy">üèÅ End Strategy</button>
          </div>
        </div>

        <!-- Center - Node Editor Canvas -->
        <div class="editor-container">
          <canvas id="nodeCanvas"></canvas>
          <div class="canvas-hint">
            Click nodes from the left panel to add them to the canvas<br>
            Connect outputs to inputs to create execution flows<br>
            <strong>Pan:</strong> Space+Drag or Right Mouse | <strong>Zoom:</strong> Mouse Wheel<br>
            <strong>Hotkeys:</strong> Ctrl+Z (Undo) | Delete (Remove node)
          </div>
        </div>

        <!-- Right Sidebar -->
        <div class="sidebar right-sidebar">
          <div class="properties-panel">
            <h3>Properties</h3>
            <div id="nodeProperties">
              <p class="no-selection">Select a node to edit properties</p>
            </div>
          </div>

          <div class="account-panel">
            <h3>Account Info</h3>
            <div class="info-grid">
              <div class="info-item">
                <span class="label">Balance:</span>
                <span id="balance">-</span>
              </div>
              <div class="info-item">
                <span class="label">Equity:</span>
                <span id="equity">-</span>
              </div>
              <div class="info-item">
                <span class="label">Profit:</span>
                <span id="profit" class="profit">-</span>
              </div>
            </div>
            <button id="refreshAccountBtn" class="btn btn-secondary btn-small">Refresh</button>
          </div>
        </div>
      </div>

      <!-- Bottom Panel - Positions -->
      <div class="bottom-panel">
        <div class="positions-panel">
          <div class="positions-tabs">
            <button class="positions-tab-btn active" data-tab="open">Open Positions</button>
            <button class="positions-tab-btn" data-tab="closed">Closed Positions</button>
          </div>
          
          <div id="openPositionsTab" class="positions-tab active">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
              <h3 style="margin: 0;">Open Positions</h3>
              <button id="refreshPositionsBtn" class="btn btn-secondary btn-small">Refresh</button>
            </div>
            <div id="positionsList" class="positions-list">
              <p class="no-data">No open positions</p>
            </div>
          </div>
          
          <div id="closedPositionsTab" class="positions-tab">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
              <h3 style="margin: 0;">Closed Positions</h3>
              <button id="refreshClosedBtn" class="btn btn-secondary btn-small">Refresh</button>
            </div>
            <div id="closedPositionsList" class="positions-list">
              <p class="no-data">No closed positions</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Trade Modal -->
    <div id="tradeModal" class="modal">
      <div class="modal-content trade-modal">
        <h2>Execute Trade</h2>
        <div class="form-group">
          <label>Symbol:</label>
          <select id="tradeSymbol">
            <option value="EURUSD">EURUSD</option>
            <option value="GBPUSD">GBPUSD</option>
            <option value="USDJPY">USDJPY</option>
            <option value="AUDUSD">AUDUSD</option>
            <option value="USDCAD">USDCAD</option>
            <option value="XAUUSD">XAUUSD (Gold)</option>
            <option value="BTCUSD">BTCUSD (Bitcoin)</option>
          </select>
        </div>
        <div class="form-group" id="currentPriceGroup">
          <label>Current Price:</label>
          <div class="current-price-display">
            <div class="price-info">
              <span class="price-label">Bid:</span>
              <span id="currentBid" class="price-value">-</span>
            </div>
            <div class="price-info">
              <span class="price-label">Ask:</span>
              <span id="currentAsk" class="price-value">-</span>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label>Order Type:</label>
          <select id="tradeType">
            <option value="BUY">Buy</option>
            <option value="SELL">Sell</option>
          </select>
        </div>
        <div class="form-group">
          <label>Volume:</label>
          <input type="number" id="tradeVolume" step="0.01" min="0.01" value="0.1">
        </div>
        <div class="form-group">
          <label>Stop Loss (optional):</label>
          <input type="number" id="tradeStopLoss" step="0.00001" placeholder="0 = no SL">
        </div>
        <div class="form-group">
          <label>Take Profit (optional):</label>
          <input type="number" id="tradeTakeProfit" step="0.00001" placeholder="0 = no TP">
        </div>
        <div class="modal-buttons">
          <button id="confirmTradeBtn" class="btn btn-primary">Execute Trade</button>
          <button id="cancelTradeBtn" class="btn btn-secondary">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
      <div class="modal-content">
        <h2>Settings</h2>
        <div class="settings-content">
          <div class="form-group">
            <label>Initial Balance:</label>
            <input type="number" id="initialBalance" value="10000" step="1000">
          </div>
          <button id="resetSimulatorBtn" class="btn btn-warning">Reset Simulator</button>
        </div>
        <div class="modal-buttons">
          <button id="closeSettingsBtn" class="btn btn-primary">Close</button>
        </div>
      </div>
    </div>

    <!-- Log Modal -->
    <div id="logModal" class="modal">
      <div class="modal-content log-modal">
        <h2>Console Log</h2>
        <div id="logContent" class="log-content">
          <p class="no-log">No log entries yet.</p>
        </div>
        <div class="modal-buttons">
          <button id="clearLogBtn" class="btn btn-secondary">Clear</button>
          <button id="closeLogBtn" class="btn btn-primary">Close</button>
        </div>
      </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
      <div class="modal-content about-modal">
        <h2>Get the Full ComfyTrade Desktop Version</h2>
        <div class="about-content">
          
          <div class="about-highlight-box">
            <h3>üöÄ This is a Limited Web Demo</h3>
            <p>You're currently using a simplified browser version with simulated data. The full desktop application offers significantly more features and real MT5 integration.</p>
          </div>
          
          <div class="about-section">
            <h3>‚ú® What You Get in the Full Desktop Version</h3>
            <ul class="feature-list-large">
              <li><strong>‚úÖ Real MT5 Integration</strong> - Connect directly to your MetaTrader 5 terminal for live trading</li>
              <li><strong>‚úÖ Historical Backtesting</strong> - Import and test strategies against years of historical data</li>
              <li><strong>‚úÖ Advanced Risk Management</strong> - Volume limits, overtrade protection, pip-based loss calculations</li>
              <li><strong>‚úÖ SMS/WhatsApp Alerts</strong> - Get instant notifications via Twilio for all trade events</li>
              <li><strong>‚úÖ Custom Indicators</strong> - Moving Average, RSI, Bollinger Bands, and more technical indicators</li>
              <li><strong>‚úÖ Plugin System</strong> - Create custom nodes for any data source, API, or trading logic</li>
              <li><strong>‚úÖ Market Sentiment Analysis</strong> - Integrate news feeds and sentiment data into your strategies</li>
              <li><strong>‚úÖ Trade Journal & Analytics</strong> - Track performance, analyze trades, and improve your strategy</li>
              <li><strong>‚úÖ Cross-Platform Desktop App</strong> - Works on Windows, Mac, and Linux</li>
            </ul>
          </div>
          
          <div class="about-section">
            <h3>üì• Download & Install</h3>
            <div class="cta-buttons-large">
              <a href="https://github.com/tomtomtong/comfyTrade-node-editor-for-MT5/releases" target="_blank" class="btn-mega btn-mega-primary">
                <span class="btn-mega-icon">‚¨áÔ∏è</span>
                <div class="btn-mega-content">
                  <strong>Download Full Version</strong>
                  <small>Get the latest release for Windows, Mac, or Linux</small>
                </div>
              </a>
              <a href="https://github.com/tomtomtong/comfyTrade-node-editor-for-MT5" target="_blank" class="btn-mega btn-mega-secondary">
                <span class="btn-mega-icon">‚≠ê</span>
                <div class="btn-mega-content">
                  <strong>View on GitHub</strong>
                  <small>Star the project ‚Ä¢ Read documentation ‚Ä¢ Contribute</small>
                </div>
              </a>
            </div>
          </div>
          
          <div class="about-section">
            <h3>üí¨ Need Help or Have Questions?</h3>
            <div class="contact-grid">
              <a href="mailto:tomtomtongtong@gmail.com" class="contact-card">
                <span class="contact-card-icon">üìß</span>
                <div class="contact-card-content">
                  <strong>Email Support</strong>
                  <span>tomtomtongtong@gmail.com</span>
                </div>
              </a>
              <a href="https://github.com/tomtomtong/comfyTrade-node-editor-for-MT5/issues" target="_blank" class="contact-card">
                <span class="contact-card-icon">üêõ</span>
                <div class="contact-card-content">
                  <strong>Report Issues</strong>
                  <span>Bug reports & feature requests</span>
                </div>
              </a>
              <a href="https://github.com/tomtomtong/comfyTrade-node-editor-for-MT5/discussions" target="_blank" class="contact-card">
                <span class="contact-card-icon">üí°</span>
                <div class="contact-card-content">
                  <strong>Community Discussions</strong>
                  <span>Ask questions & share strategies</span>
                </div>
              </a>
            </div>
          </div>
          
          <div class="about-footer-large">
            <p class="about-footer-main">Open Source ‚Ä¢ MIT License ‚Ä¢ Free Forever</p>
            <p class="about-footer-sub">Made with ‚ù§Ô∏è by the ComfyTrade community</p>
          </div>
        </div>
        <div class="modal-buttons">
          <button id="closeAboutBtn" class="btn btn-primary">Close</button>
        </div>
      </div>
    </div>

    <!-- Message Box -->
    <div id="messageBox" class="message-box"></div>
  </div>

  <script src="api.js"></script>
  <script src="node-editor.js"></script>
  <script src="app.js"></script>
</body>
</html>
